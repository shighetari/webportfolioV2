@use './variables' as *;

// Responsive Breakpoint Mixins
@mixin mobile {
  @media (max-width: $breakpoint-mobile) {
    @content;
  }
}

@mixin tablet {
  @media (max-width: $breakpoint-tablet) {
    @content;
  }
}

@mixin desktop {
  @media (min-width: $breakpoint-desktop) {
    @content;
  }
}

@mixin wide {
  @media (min-width: $breakpoint-wide) {
    @content;
  }
}

// Custom breakpoint
@mixin breakpoint($size) {
  @media (max-width: $size) {
    @content;
  }
}

// Fluid Typography Mixin
// Usage: @include fluid-text($font-size-base, $font-size-xl);
@mixin fluid-text($min-size, $max-size, $min-vw: 320px, $max-vw: 1440px) {
  font-size: clamp(#{$min-size}, calc(#{$min-size} + (#{strip-unit($max-size)} - #{strip-unit($min-size)}) * ((100vw - #{$min-vw}) / (#{strip-unit($max-vw)} - #{strip-unit($min-vw)}))), #{$max-size});
}

// Strip unit helper for calculations
@function strip-unit($value) {
  @return $value / ($value * 0 + 1);
}

// Touch Target Mixin (WCAG 2.1 Level AAA: 44x44px minimum)
@mixin touch-target($width: 44px, $height: 44px) {
  min-width: $width;
  min-height: $height;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

// Focus Visible Mixin (for keyboard navigation)
@mixin focus-visible($color: $color-primary, $offset: 2px) {
  &:focus-visible {
    outline: 3px solid $color;
    outline-offset: $offset;
    border-radius: 4px;
  }

  &:focus:not(:focus-visible) {
    outline: none;
  }
}

// Reduced Motion Support
@mixin reduced-motion {
  @media (prefers-reduced-motion: reduce) {
    @content;
  }
}

// Card Style Mixin
@mixin card($bg: $card-bg-light, $border: $card-border-light, $radius: 20px) {
  background: $bg;
  border: 1px solid $border;
  border-radius: $radius;
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;

  @include reduced-motion {
    transition: none;
  }
}

// Smooth Hover Effect
@mixin smooth-hover($transform: translateY(-5px), $shadow: 0 10px 30px rgba(0, 0, 0, 0.15)) {
  transition: transform 0.3s ease, box-shadow 0.3s ease;

  &:hover {
    transform: $transform;
    box-shadow: $shadow;
  }

  @include reduced-motion {
    transition: none;
    &:hover {
      transform: none;
    }
  }
}

// Accessible Hide (visually hidden but screen reader accessible)
@mixin sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

// Truncate text with ellipsis
@mixin truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// Multi-line truncate
@mixin line-clamp($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
